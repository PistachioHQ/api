openapi: 3.1.0
info:
  title: Pistachio Admin API
  description: |
    Administrative API for managing Pistachio projects and resources.
    Requires service account authentication.
  version: 0.1.0
  contact:
    name: Pistachio Team

servers:
  - url: https://admin.pistachiohq.com/v1
    description: Production server
  - url: https://admin.staging.pistachiohq.com/v1
    description: Staging server

tags:
  - name: Projects
    description: Project management operations
  - name: Tenants
    description: Tenant management operations within projects
  - name: Apps
    description: App management operations within projects

paths:
  /admin/v1/projects:
    $ref: './paths/admin/projects.yml#/projects'
  /admin/v1/projects/{projectId}:
    $ref: './paths/admin/projects.yml#/projectById'
  /admin/v1/projects/{projectId}:undelete:
    $ref: './paths/admin/projects.yml#/projectUndelete'
  /admin/v1/projects/{projectId}/adminSdkConfig:
    $ref: './paths/admin/projects.yml#/projectAdminSdkConfig'
  /admin/v1/projects:search:
    $ref: './paths/admin/projects.yml#/projectsSearch'
  /admin/v1/projects/{projectId}/tenants:
    $ref: './paths/admin/tenants.yml#/tenants'
  /admin/v1/projects/{projectId}/tenants/{tenantId}:
    $ref: './paths/admin/tenants.yml#/tenantById'
  /admin/v1/projects/{projectId}/tenants:search:
    $ref: './paths/admin/tenants.yml#/tenantsSearch'
  /admin/v1/projects/{projectId}/apps:
    $ref: './paths/admin/apps.yml#/apps'
  /admin/v1/projects/{projectId}/apps:search:
    $ref: './paths/admin/apps.yml#/appsSearch'
  /admin/v1/projects/{projectId}/apps/{appId}:
    $ref: './paths/admin/apps.yml#/appById'
  /admin/v1/projects/{projectId}/apps/{appId}:undelete:
    $ref: './paths/admin/apps.yml#/appUndelete'
  /admin/v1/projects/{projectId}/apps/{appId}/config:
    $ref: './paths/admin/apps.yml#/appConfig'

components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: query
      name: key
      description: API key for client SDK operations. API keys are auto-generated per app and identify the project.
    ServiceAccountAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: Service account credential for admin operations.

security:
  - ApiKeyAuth: []
    ServiceAccountAuth: []
